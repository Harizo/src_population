<div id="forms" class="page-layout simple fullwidth doc-page" layout="column">
    <div class="header md-accent-bg" layout="row" layout-align="space-between">
        <div layout="column" layout-align="space-between">
            <div class="breadcrumb" layout="row" layout-align="start center">
                <md-icon md-font-icon="icon-home" class="s16"></md-icon>
                <md-icon md-font-icon="icon-chevron-right" class="s16 separator"></md-icon>
                <!-- <span class="parent">Codification</span> -->
                <span class="parent" Récommandations></span>
            </div>
            <div class="title">Récommandations</div>
        </div>
    </div>
    <div class="content"layout="column">
		<div class="form-wrapper"> 
			<md-tabs md-dynamic-height>
				<md-tab label="Liste récommandations">
					<md-tab-body>
						<fieldset>
							<legend>
								Récommandations
								<button ng-disabled="vm.disable" ng-click="vm.ajouterDocument()" title="Ajouter document" style="font-size: 24px;font-weight: bold;background-color: rgb(255,255,255);color: rgb(3,155,229);">+</button>
							</legend>
							<div style="clear:both;"></div>
							<table ng-table="tableAvancement" class="dataTable row-border hover"  datatable="ng" dt-options="vm.dtOptions">
								<thead>
									<tr>
										<th class="secondary-text" ng-repeat="c in :: vm.tdr_coldetail">
											<div class="table-header">
												<span class="column-title">{{c.titre}}</span>
											</div>
										</th>
									</tr>
								</thead>
								<tbody>
									<tr  ng-repeat="avancement in vm.allRecommandation"  ng-class="{selected: avancement.$selected}" ng-click="vm.selectionDocument(avancement)">
										<td>
											<span ng-if="avancement.$edit">
												<md-input-container>
													<label>Resumé</label>
													<input type="text" ng-model="avancement.resume"   required/>
													<div ng-messages="resume.$error"
														role="alert">
														<div ng-message="required">
															<span>Resumé obligatoire.</span>
														</div>
													</div>
												</md-input-container> 
											</span>
											<span ng-if="!avancement.$edit">{{avancement.resume}}</span>
										</td>
										<td>
											<span ng-if="avancement.$edit">
												<md-input-container>
													<label>Url</label>
													<input type="text" ng-model="avancement.url"   required/>
													<div ng-messages="url.$error"
														role="alert">
														<div ng-message="required">
															<span>Url obligatoire.</span>
														</div>
													</div>
												</md-input-container> 
											</span>
											<span ng-if="!avancement.$edit">{{avancement.url}}</span>
										</td>
										<td>
											<span ng-if="avancement.$edit">
												<label>{{avancement.nom_fichier}}</label>
												<div class="file-upload">
													<input file-uploader id="fichier" name="fichier" type="file" custom-on-change="uploadFile"  ng-multiple="false" />
													<button ng-click="vm.uploadFile()" style="background: #b4ddb4; /* Old browsers */
background: -moz-linear-gradient(top,  #b4ddb4 0%, #83c783 17%, #52b152 33%, #008a00 67%, #005700 83%, #002400 100%); /* FF3.6+ */
background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#b4ddb4), color-stop(17%,#83c783), color-stop(33%,#52b152), color-stop(67%,#008a00), color-stop(83%,#005700), color-stop(100%,#002400)); /* Chrome,Safari4+ */
background: -webkit-linear-gradient(top,  #b4ddb4 0%,#83c783 17%,#52b152 33%,#008a00 67%,#005700 83%,#002400 100%); /* Chrome10+,Safari5.1+ */
background: -o-linear-gradient(top,  #b4ddb4 0%,#83c783 17%,#52b152 33%,#008a00 67%,#005700 83%,#002400 100%); /* Opera 11.10+ */
background: -ms-linear-gradient(top,  #b4ddb4 0%,#83c783 17%,#52b152 33%,#008a00 67%,#005700 83%,#002400 100%); /* IE10+ */
background: linear-gradient(to bottom,  #b4ddb4 0%,#83c783 17%,#52b152 33%,#008a00 67%,#005700 83%,#002400 100%); /* W3C */
filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#b4ddb4', endColorstr='#002400',GradientType=0 ); /* IE6-9 */
color:white;
font-weight:bold;
height:30px;">Upload me</button>
												</div>
												<div ng-messages="fichier.$error" role="alert"> 
												</div>
											</span>
											<span ng-if="!avancement.$edit">{{avancement.nom_fichier}}</span>
										</td>
										<td>
											<span ng-if="avancement.$edit">
												<md-input-container>
													<label>Date upload</label>
													<input type="date" ng-model="avancement.date_upload" />
													<div ng-messages="date_upload.$error" role="alert">									   
													</div>
												</md-input-container> 
											</span>
											<span ng-if="!avancement.$edit">{{avancement.date_upload |date:'dd/MM/yyyy'}}</span>
										</td>
										<td>
											<span ng-if="avancement.$edit && (vm.utilisateur_id=='1' || vm.utilisateur_id=='3' || vm.utilisateur_id=='5' || vm.utilisateur_id=='8' || vm.utilisateur_id=='40' || vm.utilisateur_id=='41')">
												<input ng-true-value="1" ng-false-value="0" 
												ng-checked="avancement.validation==1" style="width:15px;height:12px;"
												type="checkbox" name="validation" ng-model="avancement.validation"> 
											</span>
											<span ng-if="!avancement.$edit || (vm.utilisateur_id!='1' && vm.utilisateur_id!='3' && vm.utilisateur_id!='5' && vm.utilisateur_id!='8' && vm.utilisateur_id!='40' && vm.utilisateur_id!='41')">
												<input disabled ng-true-value="1" ng-false-value="0" ng-value="avancement.validation" 
												ng-checked="avancement.validation==1" style="width:15px;height:12px;"
												type="checkbox" name="validation" ng-model="avancement.validation"> 
											</span>
										</td>
										<td>
											<span ng-if="avancement.$edit && (vm.utilisateur_id=='1' || vm.utilisateur_id=='3' || vm.utilisateur_id=='5' || vm.utilisateur_id=='40' || vm.utilisateur_id=='41')">
												<input ng-true-value="1" ng-false-value="0"
												ng-checked="avancement.fait==1" style="width:15px;height:12px;"
												type="checkbox" name="fait" ng-model="avancement.fait"> 
											</span>
											<span ng-if="!avancement.$edit || (vm.utilisateur_id!='1' && vm.utilisateur_id!='3' && vm.utilisateur_id!='5' && vm.utilisateur_id!='40' && vm.utilisateur_id!='41')">
												<input disabled ng-true-value="1" ng-false-value="0" ng-value="avancement.fait" 
												ng-checked="avancement.fait==1" style="width:15px;height:12px;"
												type="checkbox" name="fait" ng-model="avancement.fait"> 
											</span>
										</td>
										<td>
											<a ng-if="!avancement.$edit && (vm.utilisateur_id ==avancement.utilisateur_id || vm.utilisateur_id=='1')" ng-click="vm.modifierDocument(avancement)" title="Modifier">
												<span class="icon-table-edit"></span>
											</a>
											<a ng-if="!avancement.$edit && (vm.utilisateur_id ==avancement.utilisateur_id || vm.utilisateur_id=='1')" ng-click="vm.supprimerDocument(avancement)" title="Supprimer">
												<span class="icon-delete"></span>
											</a>
											<a ng-if="avancement.$edit" ng-click="vm.annulerDocument(avancement)" title="Annuler modification">
												<span class="icon-cancel"></span>
											</a>
											<a ng-if="avancement.$edit" ng-click="vm.uploadFile(avancement,0)" title="Enregistrer">
												<span class="icon-content-save"></span>
											</a>
											<a ng-if="!avancement.$edit" ng-click="vm.exportfichier(avancement)" title="Enregistré par : {{avancement.nomutilisateur}} (Download)">
												<span class="icon-download"></span>
											</a>								  
										</td>
									</tr>
								</tbody>
							</table>
						</fieldset>
					</md-tab-body>
				</md-tab> 
			</md-tabs>
		</div>
    </div>
</div>
    



<div id="forms" class="page-layout simple fullwidth doc-page" layout="column">
    <!-- HEADER -->
    <div class="header md-accent-bg" layout="row" layout-align="space-between">
        <div layout="column" layout-align="space-between">
            <div class="breadcrumb" layout="row" layout-align="start center">
                    <md-icon md-font-icon="icon-home" class="s16"></md-icon>
                    <md-icon md-font-icon="icon-chevron-right" class="s16 separator"></md-icon>
                    <span class="parent">Registre des bénéficiaires</span>
                </div>

            <div class="title">Registre des bénéficiaires</div>
        </div>
    </div>
    <!--/ HEADER -->
   
    <!-- CONTENT -->
    <div class="content"layout="column">


        <div class="form-wrapper">
            <!--md-progress-circular ng-if="vm.affiche_load" class="md-accent" aria-label="Rating" md-mode="indeterminate" md-diameter="34"></md-progress-circular> 
                  <div ng-if="vm.affiche_load" style="position:relative;top: -30px;  left: 60px;color: #039be5">
                      Chargement,veuillez patienter s'il vous plait ...
                  </div!-->
            <div class="white-bg md-whiteframe-4dp">
                <md-button class="custum_button"  style="color: #f8670d;" ui-sref="app.population_accueil">Revenir à l'accueil</md-button>
                <md-progress-circular ng-if="vm.load_ddb"  aria-label="Rating" md-mode="indeterminate" md-diameter="34"></md-progress-circular> 
                <div ng-if="vm.load_ddb" style="position:relative;top: -30px;  left: 60px;color: #383c48">
                    Chargement des données de base,veuillez patienter s'il vous plait ...
                </div> 
            <md-tabs md-dynamic-height>
                <md-tab label="Filtre">
                    <md-tab-body>
                        <form name="formEffAgeSexe" class="md-inline-form" novalidate >
                        	<!--div layout="column" layout-gt-xs="row">
			                  <md-input-container flex="100" flex-gt-xs="40">
			                              
			                    <label>Reporting</label>
			                      <md-select ng-model="vm.filtre.pivot" ng-disabled="vm.affiche_load"  required>
                                    <md-optgroup label="Environnement démographique et socioéconomique">
                                        <md-option  ng-repeat="pivo in vm.pivots | filter: {category: 'theme1' } | orderBy : 'titre'" value="{{pivo.id}}">{{pivo.titre}}
                                        </md-option>
                                    </md-optgroup>

                                    <md-optgroup label="Système de protection sociale">
                                        <md-option  ng-repeat="pivo in vm.pivots | filter: {category: 'theme2' } | orderBy : 'titre'" value="{{pivo.id}}">{{pivo.titre}}
                                        </md-option>
                                    </md-optgroup>
			                      </md-select>
			                  </md-input-container>
			                  <md-input-container flex="100" flex-gt-xs="60">
			                  </md-input-container>
			                </div!-->
                         

                            <div layout="column" layout-gt-xs="row">       
                                

                                <md-input-container flex="100" flex-gt-xs="25" >

                                    <label>Region</label>
                                        <md-select ng-model="vm.filtre.region_id" name="region" ng-change="vm.modifierregion(vm.filtre)" required>
                                            <md-option ng-repeat="region in vm.allregion" value="{{region.id}}">
                                            {{region.nom}}
                                            </md-option>
                                        </md-select>

                                        <div ng-messages="formEffAgeSexe.region.$error" role="alert">
                                            <div ng-message="required">
                                                <span >Région obligatoire</span>
                                            </div>
                                        </div>
                                    </md-input-container>


                                    <md-input-container flex="100" flex-gt-xs="25" ng-disabled="!(vm.filtre.region_id)">

                                        <label>District</label>
                                        <md-select ng-model="vm.filtre.district_id" name="district" ng-change="vm.modifierdistrict(vm.filtre)" required>

                                            <!--md-option value="*">*</md-option!-->
                                            <md-option ng-repeat="dist in vm.alldistrict" value="{{dist.id}}">
                                                
                                            {{dist.nom}}
                                            </md-option>
                                        </md-select>

                                        <div ng-messages="formEffAgeSexe.district.$error" role="alert">
                                            <div ng-message="required">
                                                <span >District obligatoire</span>
                                            </div>
                                        </div>
                                    </md-input-container>

                                    <md-input-container flex="100" flex-gt-xs="25" ng-disabled="!(vm.filtre.district_id)">

                                    <label>Commune</label>
                                        <md-select ng-model="vm.filtre.commune_id" >

                                            <md-option value="*">*</md-option>
                                            <md-option ng-repeat="com in vm.allcommune" value="{{com.id}}">
                                            {{com.nom}}
                                            </md-option>
                                        </md-select>
                                    </md-input-container>

                                <md-input-container flex="100" flex-gt-xs="25" ng-disabled="!(vm.filtre.district_id)">

                                    <label>Intervention</label>
                                        <md-select ng-model="vm.filtre.intervention_id" >

                                            <md-option value="*">*</md-option>
                                            <md-option ng-repeat="int in vm.allintervention" value="{{int.id}}">
                                            {{int.intitule}}
                                            </md-option>
                                        </md-select>
                                    </md-input-container>

                            </div>

                  
                            <div>
                                <md-button ng-if="!vm.affiche_load" type="submit" class="md-raised md-accent" aria-label="Enregistrer" ng-disabled="formEffAgeSexe.$invalid" ng-click="vm.filtrer(vm.filtre)"> Afficher le résultat
                                     
                                </md-button>

                                <md-button ng-if="!vm.affiche_load" type="submit" class="md-raised md-primary" aria-label="Enregistrer" ng-disabled="formEffAgeSexe.$invalid" ng-click="vm.export_excel(vm.filtre)"> Exporter en Excel
                                     
                                </md-button>

                                <md-progress-circular ng-if="vm.affiche_load"  aria-label="Rating" md-mode="indeterminate" md-diameter="34"></md-progress-circular> 
                                    <div ng-if="vm.affiche_load" style="position:relative;top: -30px;  left: 60px;color: #383c48">
                                        Chargement,veuillez patienter s'il vous plait ...
                                    </div> 
                            </div>
                        </form>  
                        <table class="dataTable row-border cell-border hover text-center" datatable="ng"
                        dt-options="vm.dtOptions" ms-responsive-table>
                            <thead>
                                <tr>
                                	
                                    <!--CODE HARIZO-->
                                
                                        <!-- liste_beneficiaire_intevention-->
                                        
                                        <!--th class="secondary-text">
                                            <div class="table-header">
                                                <span class="column-title text-center">Région</span>
                                            </div>
                                        </th!-->
                                        <th class="secondary-text">
                                            <div class="table-header">
                                                <span class="column-title text-center">Bénéficiaire</span>
                                            </div>
                                        </th>
                                        <th class="secondary-text">
                                            <div class="table-header">
                                                <span class="column-title text-center">District</span>
                                            </div>
                                        </th>
                                        <th class="secondary-text">
                                            <div class="table-header">
                                                <span class="column-title text-center">Commune</span>
                                            </div>
                                        </th>
                                        <th class="secondary-text">
                                            <div class="table-header">
                                                <span class="column-title text-center">Fokontany</span>
                                            </div>
                                        </th>
                                        <th class="secondary-text">
                                            <div class="table-header">
                                                <span class="column-title text-center">Intervention</span>
                                            </div>
                                        </th>
                                        
                                        <th class="secondary-text">
                                            <div class="table-header">
                                                <span class="column-title text-center">Type Bénéficiaire</span>
                                            </div>
                                        </th>
                                        
                                        <!--fin liste_beneficiaire_intevention-->



                                </tr>
                            </thead>
                            <tbody>
                                <tr ng-repeat="data in vm.datas">

                                    <td><b>{{data.nom}}</b> <br> {{data.prenom}}</td>
                                    <td>{{data.nom_district}}</td>
                                    <td>{{data.nom_commune}}  </td>
                                    <td>{{data.nom_fokontany}}</td>
                                    <td>{{data.intitule_intervention}}</td>
                                    <td>{{data.type}}</td>

                                </tr>
                            </tbody>
                        </table>  
                    </md-tab-body>
                    
                </md-tab>                
            </md-tabs>
            </div>
        </div>
    </div>
    <!--/ CONTENT -->    
</div>
